@using Bigon.Business.Modules.BlogPostModule.Queries.BlogPostGetByIdQuery
@model BlogPostGetByIdDto

@{
    ViewData["Title"] = "Details";
}
<div id="shopify-section-template--14146645590067__main" class="shopify-section">
    <!-- Blog Area Start -->
    <div class="blog-area" id="section-template--14146645590067__main">
        <div class="container">
            <div class="row">
                <!-- Main Blog Start -->
                <div class="col-md-push-3 col-md-9 col-sm-12">
                    <!-- Blog Details Start -->
                    <div class="blog-details">
                        <div class="blog-img">
                            <img src="~/uploads/images/@Model.ImagePath" alt="blog-image">
                        </div>
                        <div class="post-info">
                            <div class="post-info-left">
                                <div class="post-date">
                                    <span>15</span>  Apr
                                </div>
                                <a href="#" class="post-author">
                                    <i class="fa fa-user"></i> BigOn-5 Admin
                                </a>
                            </div>
                            @if (Model.Comments > 0)
                            {
                                <div class="post-info-right">
                                    @Model.Comments comment
                                </div>
                            }

                        </div>
                        <h3 class="semi-title">@Model.Title</h3>
                        <div>
                            @Html.Raw(Model.Body)
                        </div>
                        <!--  Blog-Share Start  -->
                        <div class="blog-share mtb-50">
                            <div class="row">
                                <div class="col-lg-7 col-md-7 col-sm-6">
                                    <span class="pull-left">TAGS :</span>
                                    <ul class="list-inline">
                                        @foreach (var item in Model.Tags)
                                        {
                                            <li><a asp-action="index" asp-route-tag="@item">@item</a></li>
                                        }
                                    </ul>
                                </div>
                                <div class="col-lg-5 col-md-5 col-sm-6">
                                    <div class="social-links text-right">
                                        <ul class="social-link-list">
                                            <li>Share:</li>
                                            <li><a target="_blank" href="//www.facebook.com/sharer.php?u=https://bigon-5.myshopify.com/blogs/news/temporibus-autem-quibusdam-3" title="Share on Facebook" tabindex="0"><i class="fa fa-facebook"></i></a></li>
                                            <li><a target="_blank" href="//twitter.com/share?text=Temporibus%20autem%20quibusdam&amp;url=https://bigon-5.myshopify.com/blogs/news/temporibus-autem-quibusdam-3;source=webclient" title="Share on Twitter" tabindex="0"><i class="fa fa-twitter"></i></a></li>
                                            <li> <a target="_blank" href="//pinterest.com/pin/create/button/?url=https://bigon-5.myshopify.com/blogs/news/temporibus-autem-quibusdam-3&amp;media=http://bigon-5.myshopify.com/cdn/shop/articles/12_1024x1024.jpg?v=1523771328&amp;description=Temporibus%20autem%20quibusdam" title="Share on Pinterest" tabindex="0"><i class="fa fa-pinterest"></i></a></li>
                                            <li><a target="_blank" href="//plus.google.com/share?url=https://bigon-5.myshopify.com/blogs/news/temporibus-autem-quibusdam-3" title="Share on Google+" tabindex="0"><i class="fa fa-google-plus"></i></a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <!-- End of Row -->
                        </div>
                        <!--  Blog-Share End  -->
                    </div>
                    @await Component.InvokeAsync("Comments", new { postId = Model.Id })
                    <form method="post" id="commentForm">
                        <input type="hidden" name="PostId" asp-for="Id" />
                        <input type="hidden" name="ParentId" />
                        <!-- Contact Email Area Start -->
                        <div class="blog-detail-contact">
                            <h3 class="mb-5">Leave a comment</h3>
                            <p class="text-capitalize mb-40">Lorem ipsum dolor sit amet, consectetur adipisicing elit.</p>
                            <div class="row">
                                <div class="address-wrapper">
                                    <ul class="col-xs-12 comments">
                                        <li class="comment-text">
                                            <textarea cols="30" rows="10" placeholder="Ürəy sözünüzü yazın" name="Comment"></textarea>
                                        </li>
                                    </ul>
                                </div>
                                <p class="form-message ml-15"></p>
                                <div class="col-xs-12 footer-content mail-content">
                                    <div class="send-email pull-right">
                                        <input type="submit" value="Submit" class="submit">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <!-- Main Blog End -->
                <div class="col-md-3 col-md-pull-9 col-sm-12">
                    <div class="main-right-sidebar border-default universal-padding">
                        <div class="categorie recent-post same-sidebar sidebar-widget mb-40">
                            <h3 class="sidebar-title mb-30">Search</h3><div class="sidebar-search">
                                <form action="/search" method="get" role="search">
                                    <input type="hidden" name="type" value="product">
                                    <input type="search" name="q" value="" placeholder="Search our store" aria-label="Search our store">
                                    <button type="submit">
                                        <i class="fa fa-search"></i>
                                    </button>
                                </form>
                            </div>
                        </div>
                        <!-- Single Sidebar Start  -->
                        <div class="categorie recent-post same-sidebar category-sub-menu sidebar-widget mb-40">
                            <h3 class="sidebar-title mt-30">Custom Menu</h3><ul class="sidebar-list">
                                <li class="has-sub ">
                                    <a href="/">Home</a>
                                    <ul>
                                        <li><a href="https://bigon-5.myshopify.com/?preview_theme_id=120458870835">Home Version 1</a></li>
                                        <li><a href="https://bigon-5.myshopify.com/?preview_theme_id=120458903603">Home Version 2</a></li>
                                        <li><a href="https://bigon-5.myshopify.com/?preview_theme_id=120458969139">Home Version 3</a></li>
                                        <li><a href="https://bigon-5.myshopify.com/?preview_theme_id=120459001907">Home Version 4</a></li>
                                        <li><a href="https://bigon-5.myshopify.com/?preview_theme_id=120459034675">Home Version 5</a></li>
                                        <li><a href="https://bigon-5.myshopify.com/?preview_theme_id=120459067443">Home Version 6</a></li>
                                        <li><a href="https://bigon-5.myshopify.com/?preview_theme_id=120459100211">Home Version  RTL</a></li>
                                    </ul>
                                </li>
                                <li class=""><a href="/pages/about">about us</a></li>
                                <li class=""><a href="/pages/contact">contact us</a></li>
                                <li class="has-sub active">
                                    <a href="/blogs/news">blog</a>
                                    <ul>
                                        <li><a href="https://bigon-5.myshopify.com/blogs/news/temporibus-autem-quibusdam-3">blog details</a></li>
                                    </ul>
                                </li>
                                <li class="has-sub ">
                                    <a href="/collections/all">shop</a>
                                    <ul>
                                        <li><a href="/collections/all">laptops</a></li>
                                        <li><a href="/collections/all">monitors</a></li>
                                        <li><a href="/collections/laptops">image</a></li>
                                    </ul>
                                </li>
                                <li class="has-sub ">
                                    <a href="/products/aliquam-consequat-mattis">Products</a>
                                    <ul>
                                        <li><a href="/products/cras-neque-metus">Simple Product</a></li>
                                        <li><a href="/products/accusantium-doloremque">Variable Product</a></li>
                                        <li><a href="/products/affiliate-link-product">Affiliate Link product </a></li>
                                        <li><a href="/products/preorder-product">Product Preorder</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                        <!-- Single Sidebar End  -->
                        <div class="recent-post same-sidebar sidebar-widget mb-40">
                            <h3 class="sidebar-title mb-30">Recent Post</h3>
                            <ul>
                                <!-- Singel Post Thumb Start -->
                                <li class="post-thumb fix">
                                    <div class="left-post-thumb f-left mr-20">
                                        <a href="/blogs/news/temporibus-autem-quibusdam-3"><img class="img" src="//bigon-5.myshopify.com/cdn/shop/articles/12_50X50_crop_center.jpg?v=1523771328" alt=""></a>
                                    </div>
                                    <div class="right-post-thumb fix">
                                        <h4><a href="/blogs/news/temporibus-autem-quibusdam-3">Temporibus autem quibusdam</a></h4>
                                        <span>Apr 15, 2018</span>
                                    </div>
                                </li>
                                <!-- Singel Post Thumb End -->
                                <!-- Singel Post Thumb Start -->
                                <li class="post-thumb fix">
                                    <div class="left-post-thumb f-left mr-20">
                                        <a href="/blogs/news/temporibus-autem-quibusdam-2"><img class="img" src="//bigon-5.myshopify.com/cdn/shop/articles/9_50X50_crop_center.jpg?v=1523771309" alt=""></a>
                                    </div>
                                    <div class="right-post-thumb fix">
                                        <h4><a href="/blogs/news/temporibus-autem-quibusdam-2">Temporibus autem quibusdam</a></h4>
                                        <span>Apr 15, 2018</span>
                                    </div>
                                </li>
                                <!-- Singel Post Thumb End -->
                                <!-- Singel Post Thumb Start -->
                                <li class="post-thumb fix">
                                    <div class="left-post-thumb f-left mr-20">
                                        <a href="/blogs/news/temporibus-autem-quibusdam-1"><img class="img" src="//bigon-5.myshopify.com/cdn/shop/articles/6_50X50_crop_center.jpg?v=1523771291" alt=""></a>
                                    </div>
                                    <div class="right-post-thumb fix">
                                        <h4><a href="/blogs/news/temporibus-autem-quibusdam-1">Temporibus autem quibusdam</a></h4>
                                        <span>Apr 15, 2018</span>
                                    </div>
                                </li>
                                <!-- Singel Post Thumb End -->
                            </ul>
                        </div>
                        <!-- Recent Post End -->
                        <!-- Category Post Start -->
                        <div class="categorie recent-post same-sidebar sidebar-widget mb-40">
                            <h3 class="sidebar-title mb-30">Archive</h3>
                            <dl>
                                <dt>
                                    April 2018
                                </dt>
                                <dd>
                                    <ul class="blog_links">
                                        <li>&raquo; <a href="/blogs/news/temporibus-autem-quibusdam-3">Temporibus autem quibusdam</a></li>
                                        <li>&raquo; <a href="/blogs/news/the-standard-chunk-of-lorem-ipsum-used-since-3">The Standard Chunk Of Lorem...</a></li>
                                        <li>&raquo; <a href="/blogs/news/it-is-a-long-established-fact-that-a-reader-will-3">It is a long established fa...</a></li>
                                        <li>&raquo; <a href="/blogs/news/temporibus-autem-quibusdam">Temporibus autem quibusdam</a></li>
                                    </ul>
                                </dd>
                            </dl>
                        </div>
                        @if (Model.Tags?.Length > 0)
                        {
                            <div class="categorie recent-post same-sidebar sidebar-widget mb-40">
                                <h3 class="sidebar-title mb-30">Tags</h3>
                                <ul class="tag-list">
                                    @foreach (var item in Model.Tags)
                                    {
                                        <li><a asp-action="index" asp-route-tag="@item">@item</a></li>
                                    }
                                </ul>
                            </div>
                        }
                    </div>
                    <script>
                        $('.category-sub-menu li.has-sub > a').on('click', function () {
                            $(this).removeAttr('href');
                            var element = $(this).parent('li');
                            if (element.hasClass('open')) {
                                element.removeClass('open');
                                element.find('li').removeClass('open');
                                element.find('ul').slideUp();
                            } else {
                                element.addClass('open');
                                element.children('ul').slideDown();
                                element.siblings('li').children('ul').slideUp();
                                element.siblings('li').removeClass('open');
                                element.siblings('li').find('li').removeClass('open');
                                element.siblings('li').find('ul').slideUp();
                            }
                        });
                    </script>
                </div>
            </div>
        </div>
        <!-- Container End -->
    </div>
    <!-- Blog Area End --><style data-shopify>
                              #section-template--14146645590067__main {
                                  padding-top: 0px;
                                  padding-bottom: 50px;
                              }

                              @@media (min-width: 768px) and (max-width: 991px) {
                                  #section-template--14146645590067__main {
                                      padding-top: 0px;
                                      padding-bottom: 50px;
                                  }
                              }

                              @@media (max-width: 767px) {
                                  #section-template--14146645590067__main {
                                      padding-top: 0px;
                                      padding-bottom: 50px;
                                  }
                              }</style><style>
    </style>
</div>
@section breadcrumbs{
    <div class="breadcrumbs-section ptb-50">
        <div class="breadcrumbs">
            <div class="container">
                <div class="row">
                    <div class="col-xs-12">
                        <div class="breadcrumbs-inner">
                            <nav class="" role="navigation" aria-label="breadcrumbs">
                                <ul class="breadcrumb-list">
                                    <li>
                                        <a asp-controller="home" asp-action="index" title="Back to the home page">Home</a>
                                    </li>
                                    <li>
                                        <a asp-action="index" title="">Blogs</a>
                                        <span>@Model.Title</span>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
  }

@section addjs{
    <script src="~/libs/image-letter/image-letter.js"></script>
    <script>
        $(document).ready(function () {

            $('form#commentForm').submit(function (e) {
                e.preventDefault();

                let formData = new FormData(e.currentTarget);

                $.ajax({
                    url: '@Url.Action("AddComment")',
                    type: 'POST',
                    data: formData,
                    processData: false,
                    contentType: false,
                    success: function (response) {
                        let id = $(`input[name=ParentId]`).val();
                        $('ul.comments li:not(.comment-text)').remove();
                        $(`input[name=ParentId]`).val('');

                        let pin = $('.single-comment:last-child');

                        if(pin.length>0){
                            if (id.length == 0) {
                                $(response).insertAfter(pin);
                            }
                            else {
                                $(response).insertAfter($(`.single-comment#comment-${id}`));
                            }
                        }
                        else{
                            $(response).insertAfter($(`.comment-area .sidebar-title`));
                        }

                        

                        createAvatar();
                        console.log(response);
                        e.currentTarget.reset();
                    },
                    error: function (response) {
                        console.log(response);
                    }
                });
            });

        });



        function replyComment(element) {
            let comment = $(element).closest('.single-comment').clone().html();

            let replied = $('<li/>', {
                html: comment
            });

            let id = $(element).data('id');
            $(`input[name=ParentId]`).val(id);

            let btn = replied.find('.btn-reply');
            btn.html(`<i class="fa fa-trash"></i>`);
            btn.unbind().click(function (e) {
                $('ul.comments li:not(.comment-text)').remove();
                $(`input[name=ParentId]`).val('');
            });

            $('ul.comments li:not(.comment-text)').remove();
            replied.insertBefore($('.comment-text'));
        }
    </script>
}
